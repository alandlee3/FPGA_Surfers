import png

with open("sim_build/test_image_list.txt", "r") as file:
    img = eval(file.read())
    
# img = [4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 4128868, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 4128868, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4128868, 4128868, 4128868, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 4128868, 4128868, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 4128868, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 4278190130, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535, 65535]
def rgb(num):

    num = num // 2**16
    b = (num % 32) * 8
    num //= 32
    g = (num % 64) * 4
    num //= 64
    r = num * 8
    return (r,g,b)


def create_png(tile):
    width = 20
    height = 45
    img = []
    for y in range(height):
        row = ()
        for x in range(width):
            row = row + rgb( tile[y * width + x] )
        img.append(row)
    with open('result.png', 'wb') as f:
        w = png.Writer(width, height, greyscale=False)
        w.write(f, img)

create_png(img)